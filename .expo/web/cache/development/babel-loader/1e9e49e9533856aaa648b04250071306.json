{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _reactNative = require(\"react-native\");\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _CustomInput = _interopRequireDefault(require(\"../../../common/components/CustomInput\"));\nvar _reactNativeSizeMatters = require(\"react-native-size-matters\");\nvar _colors = _interopRequireDefault(require(\"../../../util/colors\"));\nvar _images = _interopRequireDefault(require(\"../../../assets/images\"));\nvar _CustomButton = _interopRequireDefault(require(\"../../../common/components/CustomButton\"));\nvar _validation = require(\"../../../util/validation\");\nvar _Api = require(\"../../../services/Api\");\nvar _CustomText = _interopRequireDefault(require(\"../../../common/components/CustomText\"));\nvar _fonts = _interopRequireDefault(require(\"../../../assets/fonts\"));\nvar _this = this,\n  _jsxFileName = \"D:\\\\reactNative\\\\test\\\\src\\\\screens\\\\Auth\\\\Login\\\\index.js\";\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar Login = function Login(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = (0, _react.useState)(''),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = (0, _react.useState)(''),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = (0, _react.useState)(''),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  (0, _react.useEffect)(function () {\n    _reactNative.AsyncStorage.getItem('user_id').then(function (res) {\n      if (res == null) {\n        return;\n      } else {\n        navigation.navigate('MainStack');\n      }\n    });\n  });\n  var _useState7 = (0, _react.useState)(false),\n    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n    loader = _useState8[0],\n    setLoader = _useState8[1];\n  var validate = function validate() {\n    var errors = [];\n    if ((email == null ? void 0 : email.length) == 0) {\n      errors.push('Email address *');\n      setError('Email address *');\n    } else if (!(0, _validation.isValidEmail)(email)) {\n      errors.push('Invalid email address');\n      setError('Invalid email address');\n    } else if ((password == null ? void 0 : password.length) == 0) {\n      errors.push('Password *');\n      setError('Password *');\n    }\n    if (errors.length > 0) {\n      var errorMessage = '';\n      errors.forEach(function (error) {\n        errorMessage += '\\n' + error;\n      });\n    } else {\n      onSubmit();\n    }\n  };\n  var onSubmit = function onSubmit() {\n    setLoader(true);\n    var payload = {\n      email: email,\n      password: password\n    };\n    (0, _Api.login)(payload).then(function (res) {\n      var _res$data, _res$data2;\n      _reactNative.AsyncStorage.setItem('user_id', res == null ? void 0 : (_res$data = res.data) == null ? void 0 : _res$data.data.user_id);\n      _reactNative.AsyncStorage.setItem('user_type', res == null ? void 0 : (_res$data2 = res.data) == null ? void 0 : _res$data2.data.user_type);\n      console.log(res);\n      navigation.navigate('MainStack');\n    }).catch(function (e) {\n      _reactNative.Alert.alert('Error', 'Please Check your email and password');\n      console.log('Error', e);\n    }).finally(function () {\n      return setLoader(false);\n    });\n  };\n  return _react.default.createElement(_reactNative.SafeAreaView, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.imgContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.Image, {\n    source: _images.default.logo,\n    style: {\n      width: '100%'\n    },\n    resizeMode: \"contain\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_CustomInput.default, {\n    placeholder: \"Email\",\n    withLabel: \"Email\",\n    borderWidth: 0.5,\n    value: email,\n    onChangeText: setEmail,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_CustomInput.default, {\n    placeholder: \"Password\",\n    withLabel: \"Password\",\n    value: password,\n    secureTextEntry: true,\n    borderWidth: 0.5,\n    onChangeText: setPassword,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), error.length ? _react.default.createElement(_CustomText.default, {\n    label: error,\n    color: _colors.default.red,\n    fontFamily: _fonts.default.medium,\n    container: {\n      marginBottom: (0, _reactNativeSizeMatters.verticalScale)(10)\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }) : null, _react.default.createElement(_CustomButton.default, {\n    loading: loader,\n    title: \"Login\",\n    width: \"100%\",\n    onPress: validate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }))));\n};\nvar _default = Login;\nexports.default = _default;\nvar styles = _reactNativeSizeMatters.ScaledSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: _colors.default.white\n  },\n  imgContainer: {\n    flex: 1,\n    marginHorizontal: '20@s'\n  }\n});","map":{"version":3,"names":["Login","navigation","useState","email","setEmail","password","setPassword","error","setError","useEffect","AsyncStorage","getItem","then","res","navigate","loader","setLoader","validate","errors","length","push","isValidEmail","errorMessage","forEach","onSubmit","payload","login","setItem","data","user_id","user_type","console","log","catch","e","Alert","alert","finally","styles","container","imgContainer","images","logo","width","colors","red","fonts","medium","marginBottom","verticalScale","ScaledSheet","create","flex","backgroundColor","white","marginHorizontal"],"sources":["D:/reactNative/test/src/screens/Auth/Login/index.js"],"sourcesContent":["import {\n  Alert,\n  AsyncStorage,\n  Image,\n  SafeAreaView,\n  ScrollView,\n  Text,\n  View,\n} from 'react-native';\nimport React, {useEffect, useState} from 'react';\nimport CustomInput from '../../../common/components/CustomInput';\nimport {ScaledSheet, verticalScale} from 'react-native-size-matters';\nimport colors from '../../../util/colors';\nimport images from '../../../assets/images';\nimport CustomButton from '../../../common/components/CustomButton';\nimport {isValidEmail} from '../../../util/validation';\nimport {login} from '../../../services/Api';\nimport CustomText from '../../../common/components/CustomText';\nimport fonts from '../../../assets/fonts';\nconst Login = ({navigation}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  useEffect(() => {\n    AsyncStorage.getItem('user_id').then(res => {\n      if (res == null) {\n        return;\n      } else {\n        navigation.navigate('MainStack');\n      }\n    });\n  });\n  const [loader, setLoader] = useState(false);\n  const validate = () => {\n    const errors = [];\n\n    if (email?.length == 0) {\n      errors.push('Email address *');\n      setError('Email address *');\n    } else if (!isValidEmail(email)) {\n      errors.push('Invalid email address');\n      setError('Invalid email address');\n    } else if (password?.length == 0) {\n      errors.push('Password *');\n      setError('Password *');\n    }\n\n    if (errors.length > 0) {\n      let errorMessage = '';\n      errors.forEach(error => {\n        errorMessage += '\\n' + error;\n      });\n      // Alert.alert('Missing or invalid information', errorMessage);\n    } else {\n      onSubmit();\n    }\n  };\n  const onSubmit = () => {\n    setLoader(true);\n    const payload = {\n      email: email,\n      password: password,\n    };\n\n    login(payload)\n      .then(res => {\n        AsyncStorage.setItem('user_id', res?.data?.data.user_id);\n        AsyncStorage.setItem('user_type', res?.data?.data.user_type);\n        console.log(res);\n        navigation.navigate('MainStack');\n      })\n      .catch(e => {\n        Alert.alert('Error', 'Please Check your email and password');\n        console.log('Error', e);\n      })\n      .finally(() => setLoader(false));\n  };\n  return (\n    <SafeAreaView style={styles.container}>\n      <ScrollView>\n        <View style={styles.imgContainer}>\n          <Image\n            source={images.logo}\n            style={{width: '100%'}}\n            resizeMode=\"contain\"\n          />\n          <CustomInput\n            placeholder=\"Email\"\n            withLabel=\"Email\"\n            borderWidth={0.5}\n            value={email}\n            onChangeText={setEmail}\n          />\n          <CustomInput\n            placeholder=\"Password\"\n            withLabel=\"Password\"\n            value={password}\n            secureTextEntry={true}\n            borderWidth={0.5}\n            onChangeText={setPassword}\n          />\n          {error.length ? (\n            <CustomText\n              label={error}\n              color={colors.red}\n              fontFamily={fonts.medium}\n              container={{marginBottom: verticalScale(10)}}\n            />\n          ) : null}\n          <CustomButton\n            loading={loader}\n            title=\"Login\"\n            width=\"100%\"\n            onPress={validate}\n          />\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nexport default Login;\n\nconst styles = ScaledSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.white,\n  },\n  imgContainer: {\n    flex: 1,\n    marginHorizontal: '20@s',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}